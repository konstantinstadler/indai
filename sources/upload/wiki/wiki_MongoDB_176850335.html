<!DOCTYPE html>
<html>
    <head>
        <title>Industrial Ecology Digital Lab : MongoDB</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Industrial Ecology Digital Lab</a></span>
                            </li>
                                                    <li>
                                <span><a href="Industrial-Ecology-Digital-Lab-Home_128681672.html">Industrial Ecology Digital Lab Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Development-tools_176849952.html">Development tools</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Industrial Ecology Digital Lab : MongoDB
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Unknown User (radekl)</span>, last modified on 11.11.2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="contentLayout2">
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p style="margin-left: 30.0px;"><style type='text/css'>/*<![CDATA[*/
div.rbtoc1709817187440 {padding: 0px;}
div.rbtoc1709817187440 ul {list-style: square !important;margin-left: 0px;}
div.rbtoc1709817187440 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1709817187440'>
<ul class='toc-indentation'>
<li><a href='#MongoDB-MongoDBandPyMongo'>MongoDB and PyMongo</a></li>
<li><a href='#MongoDB-InstallationonLinux'>Installation on Linux</a></li>
<li><a href='#MongoDB-InstallationonWindows'>Installation on Windows</a></li>
<li><a href='#MongoDB-Properdocumentation'>Proper documentation</a></li>
<li><a href='#MongoDB-Nomenclature'>Nomenclature</a></li>
<li><a href='#MongoDB-Basicusage'>Basic usage</a></li>
</ul>
</div></p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 class="sectionedit1" id="MongoDB-MongoDBandPyMongo">MongoDB and PyMongo</h1></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 class="sectionedit2" id="MongoDB-InstallationonLinux">Installation on Linux</h1><hr/><ol><li class="level1"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Midnight" data-theme="Midnight">$ sudo apt install mongodb</pre>
</div></div></li><li class="level1"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Midnight" data-theme="Midnight">$ pip install pymongo</pre>
</div></div></li></ol></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 class="sectionedit3" id="MongoDB-InstallationonWindows">Installation on Windows</h1><hr/><p>For most use cases <a class="external-link" href="https://studio3t.com/" rel="nofollow" title="https://studio3t.com/"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="16" src="attachments/176850335/176850336.png" data-image-src="attachments/176850335/176850336.png" data-unresolved-comment-count="0" data-linked-resource-id="176850336" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="browser-web-icon.png" data-base-url="https://www.ntnu.no/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176850335" data-linked-resource-container-version="3" alt=""></span>the MongoDB client Studio 3T</a> is all you need and more</p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 class="sectionedit4" id="MongoDB-Properdocumentation">Proper documentation</h1><hr/><ul><li class="level1"><p><a class="external-link" href="https://docs.mongodb.com/getting-started/python/" rel="nofollow" title="https://docs.mongodb.com/getting-started/python/"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="16" src="attachments/176850335/176850336.png" data-image-src="attachments/176850335/176850336.png" data-unresolved-comment-count="0" data-linked-resource-id="176850336" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="browser-web-icon.png" data-base-url="https://www.ntnu.no/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176850335" data-linked-resource-container-version="3" alt=""></span>PyMongo Getting Started guide</a></p></li><li class="level1"><p><a class="external-link" href="https://docs.mongodb.com/manual/" rel="nofollow" title="https://docs.mongodb.com/manual/"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="16" src="attachments/176850335/176850336.png" data-image-src="attachments/176850335/176850336.png" data-unresolved-comment-count="0" data-linked-resource-id="176850336" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="browser-web-icon.png" data-base-url="https://www.ntnu.no/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176850335" data-linked-resource-container-version="3" alt=""></span>The MongoDB manual</a></p></li></ul></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 class="sectionedit5" id="MongoDB-Nomenclature">Nomenclature</h1><hr/><p>Translations from SQL terms to MongoDB terms:</p><ul><li class="level1"><p>Table → Collection</p></li><li class="level1"><p>Record/row → Document</p></li><li class="level1"><p>Column → Field</p></li><li class="level1"><p>Primary key → <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="16" src="attachments/176850335/176850336.png" data-image-src="attachments/176850335/176850336.png" data-unresolved-comment-count="0" data-linked-resource-id="176850336" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="browser-web-icon.png" data-base-url="https://www.ntnu.no/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176850335" data-linked-resource-container-version="3" alt=""></span><a class="external-link" href="https://docs.mongodb.com/manual/core/document/#document-id-field" rel="nofollow">_id</a> field (automatically created if not specified)</p></li></ul></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 class="sectionedit6" id="MongoDB-Basicusage">Basic usage</h1><hr/><p>MongoDB creates databases and collections referenced if they don't already exist. The below Python code example creates a database called “database_name”, and in that database a collection called “collection_name”, into which it inserts some documents with different fieldsets. Assuming that a local MongoDB server is running.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Midnight" data-theme="Midnight">import pymongo 
import json   

client = pymongo.MongoClient() 
db = client.database_name 
coll = db.collection_name  
 
coll.insert({&quot;test&quot;: &quot;test&quot;,&quot;some_number&quot;: 4})  
with open(&quot;list_of_dicts.json&quot;) as infile: 
     coll.insert(json.load(infile))</pre>
</div></div><p>list_of_dicts.json:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Midnight" data-theme="Midnight">[
 {&quot;key&quot;: &quot;first value&quot;, &quot;category&quot;: &quot;A&quot;}, 
 {&quot;key&quot;: &quot;second value&quot;, &quot;category&quot;: &quot;A&quot;}, 
 {&quot;key&quot;: &quot;third value&quot;, &quot;category&quot;: &quot;B&quot;} 
]</pre>
</div></div><p>Notice that the insert function can take a single document or a list of documents.</p><p>One can also insert documents and query for them on the command line. Open the mongo prompt with <code>mongo</code>. In mongo, type <code>help</code> for a helpful overview of commands. Run the following commands (“&gt;” is here just the prompt symbol):</p><ol><li class="level1"><p><code>&gt; use database_name</code></p></li><li class="level1"><p><code>&gt; db.collection_name.find({“category”:“A”})</code></p></li></ol><p>The output should be this:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Midnight" data-theme="Midnight">{ &quot;_id&quot; : ObjectId(&quot;598329484073d462d2edfa1d&quot;), &quot;key&quot; : &quot;first value&quot;, &quot;category&quot; : &quot;A&quot; } 
{ &quot;_id&quot; : ObjectId(&quot;598329484073d462d2edfa1e&quot;), &quot;key&quot; : &quot;second value&quot;, &quot;category&quot; : &quot;A&quot; }</pre>
</div></div><p>Here, the “_id” field has been automatically created as a unique identifier for each document.</p><p>Here's a real-world example of a more complex query, that aggregates over a collection to return only duplicate documents:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Midnight" data-theme="Midnight">coll.aggregate([ 
    {&quot;$project&quot;: { 
        &quot;scientificname&quot;: 1, 
        &quot;valid_name&quot;: 1, 
        &quot;status&quot;: 1, 
        &quot;name_is_valid&quot;: {&quot;$eq&quot;: [&quot;$scientificname&quot;, &quot;$valid_name&quot;]} 
    }}, 
    {&quot;$match&quot;: { &quot;scientificname&quot;: {&quot;$ne&quot;: None}, 
        &quot;status&quot;: {&quot;$eq&quot;: &quot;accepted&quot;}, 
        &quot;name_is_valid&quot;: True,
    }}, 
    {&quot;$group&quot;: {&quot;_id&quot;: &quot;$scientificname&quot;, &quot;count&quot;: {&quot;$sum&quot;: 1}}}, 
    {&quot;$match&quot;: {&quot;count&quot;: {&quot;$gt&quot;: 1}}} 
])</pre>
</div></div><p>The query operations, specified in JSON-like format, are taken in steps. Dictionary keys that start with $ are operations. Dictionary values that start with $ are accessors for the field values for a document.</p><p>The first operation is <code><a class="external-link" href="https://docs.mongodb.com/manual/reference/operator/aggregation/project/" rel="nofollow" title="https://docs.mongodb.com/manual/reference/operator/aggregation/project/"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="16" src="attachments/176850335/176850336.png" data-image-src="attachments/176850335/176850336.png" data-unresolved-comment-count="0" data-linked-resource-id="176850336" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="browser-web-icon.png" data-base-url="https://www.ntnu.no/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176850335" data-linked-resource-container-version="3" alt=""></span>$project</a></code>, which selects a subset of fields to be included before the next step of the query. It can also define new fields, or rename fields. In the case above, it selects three of the existing fields by the shorthand of giving the value 1 for keys found in the document. The same thing could be achieved by key-value pairs like, e.g. <code>“scientificname”: “$scientificname”</code>. The last field, “name_is_valid”, doesn't exist in the documents. It is created, and its value is the result of the equals operator <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="16" src="attachments/176850335/176850336.png" data-image-src="attachments/176850335/176850336.png" data-unresolved-comment-count="0" data-linked-resource-id="176850336" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="browser-web-icon.png" data-base-url="https://www.ntnu.no/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176850335" data-linked-resource-container-version="3" alt=""></span><code><a class="external-link" href="https://docs.mongodb.com/manual/reference/operator/query/eq/" rel="nofollow" title="https://docs.mongodb.com/manual/reference/operator/query/eq/">$eq</a></code>. The values for the fields “scientificname” and “valid_name” needs to be equal for the query results to be meaningful in this particular case.</p><p>The next operation is <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="16" src="attachments/176850335/176850336.png" data-image-src="attachments/176850335/176850336.png" data-unresolved-comment-count="0" data-linked-resource-id="176850336" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="browser-web-icon.png" data-base-url="https://www.ntnu.no/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176850335" data-linked-resource-container-version="3" alt=""></span><code><a class="external-link" href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/" rel="nofollow" title="https://docs.mongodb.com/manual/reference/operator/aggregation/match/">$match</a></code>, which retains only matching documents. Here, “scientificname” must be not equal (<span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="16" src="attachments/176850335/176850336.png" data-image-src="attachments/176850335/176850336.png" data-unresolved-comment-count="0" data-linked-resource-id="176850336" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="browser-web-icon.png" data-base-url="https://www.ntnu.no/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176850335" data-linked-resource-container-version="3" alt=""></span><code><a class="external-link" href="https://docs.mongodb.com/manual/reference/operator/query/ne/" rel="nofollow" title="https://docs.mongodb.com/manual/reference/operator/query/ne/">$ne</a></code>) to None, etc.</p><p>The <code><a class="external-link" href="https://docs.mongodb.com/manual/reference/operator/aggregation/group/" rel="nofollow" title="https://docs.mongodb.com/manual/reference/operator/aggregation/group/"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="16" src="attachments/176850335/176850336.png" data-image-src="attachments/176850335/176850336.png" data-unresolved-comment-count="0" data-linked-resource-id="176850336" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="browser-web-icon.png" data-base-url="https://www.ntnu.no/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176850335" data-linked-resource-container-version="3" alt=""></span>$group</a></code> operation groups by whatever you set as its “_id” field, and adds aggregation fields if wanted. The field “count” gets the value of the group accumulator operator <code>[[<span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="16" src="attachments/176850335/176850336.png" data-image-src="attachments/176850335/176850336.png" data-unresolved-comment-count="0" data-linked-resource-id="176850336" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="browser-web-icon.png" data-base-url="https://www.ntnu.no/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="176850335" data-linked-resource-container-version="3" alt=""></span><a class="external-link" href="https://docs.mongodb.com/manual/reference/operator/aggregation/sum/" rel="nofollow" title="https://docs.mongodb.com/manual/reference/operator/aggregation/sum/">https://docs.mongodb.com/manual/reference/operator/aggregation/sum/</a>|$sum]</code>.</p><p>The last operation for this query is to retain only those documents (from what is returned by the above group operation) that have the value of “count” greater than 1, thus returning reduced documents that have only two fields, “_id” and “count”, the former of which contains the values from what was originally in the “scientificname” field.</p></div>
</div>
</div>
</div>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/176850335/176850336.png">browser-web-icon.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on 07.03.2024 14:13 CET</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
